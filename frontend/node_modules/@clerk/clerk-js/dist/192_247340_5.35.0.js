"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["192"],{8493:function(e,t,i){i.d(t,{l:function(){return h}});var r=i(7126),n=i(2434),l=i(2631),o=i(4194),a=i(7571),s=i(3064),d=i(9885),c=i(5872),u=i(1085),p=i(5295),m=i(1132),v=i(408);let g=e=>/^\S+@\S+\.\S+$/.test(e),h=e=>{let{onSuccess:t,onReset:i,resetButtonLabel:a}=e,{organization:c,invitations:v}=(0,l.o8)({invitations:{pageSize:10,keepPreviousData:!0}}),h=(0,d.useCardState)(),{t:x,locale:Z}=(0,u.zJ)(),[_,z]=(0,o.useState)(!1),S=(0,m.Yp)("emailAddress","",{type:"text",label:(0,u.u1)("formFieldLabel__emailAddresses")}),y=b(),C=(0,m.Yp)("role","",{label:(0,u.u1)("formFieldLabel__role")});if((0,o.useEffect)(()=>{!C.value&&y&&C.setValue(y)},[y,C]),!c)return null;let{props:{setError:T,setWarning:w,setSuccess:k,setInfo:P,isFocused:$,validatePassword:B,setHasPassedComplexity:F,hasPassedComplexity:A,feedback:D,feedbackType:R,clearFeedback:X,...K}}=S,I=(!!S.value.length||_)&&!!C.value,E=e=>{var t,i,r,n;let l=new Set([...null!==(r=null===(t=e.meta)||void 0===t?void 0:t.emailAddresses)&&void 0!==r?r:[],...null!==(n=null===(i=e.meta)||void 0===i?void 0:i.identifiers)&&void 0!==n?n:[]]),o=S.value.split(",");S.setValue(o.filter(e=>!l.has(e)).join(","))};return(0,r.BX)(d.Form.Root,{onSubmit:e=>{if(e.preventDefault(),!I)return;let i=new FormData(e.currentTarget);return c.inviteMembers({emailAddresses:S.value.split(","),role:i.get("role")}).then(async()=>{var e;return await (null==v?void 0:null===(e=v.revalidate)||void 0===e?void 0:e.call(v)),null==t?void 0:t()}).catch(e=>{var t,i,r,l,o;if(!(0,n.kD)(e)){(0,m.S3)(e,[],h.setError);return}switch(E(e.errors[0]),null===(i=e.errors)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.code){case"duplicate_record":{let t=(null===(r=e.errors[0].meta)||void 0===r?void 0:r.emailAddresses)||[];h.setError(x((0,u.u1)("organizationProfile.invitePage.detailsTitle__inviteFailed",{email_addresses:(0,m.z$)(t,Z)})));break}case"already_a_member_in_organization":{let t=null===(l=(null!==(o=e.errors[0].longMessage)&&void 0!==o?o:"").match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/))||void 0===l?void 0:l[0];(0,m.S3)(e,[],e=>t?h.setError(x((0,u.u1)("unstable__errors.already_a_member_in_organization",{email:t}))):h.setError(e));break}default:(0,m.S3)(e,[],h.setError)}})},children:[(0,r.tZ)(d.Form.ControlRow,{elementId:S.id,children:(0,r.tZ)(d.TagInput,{...K,autoFocus:!0,validate:g,sx:{width:"100%"},validateUnsubmittedEmail:e=>z(g(e)),placeholder:(0,u.u1)("formFieldInputPlaceholder__emailAddresses")})}),(0,r.BX)(s.Flex,{align:"center",justify:"between",sx:e=>({marginTop:e.space.$2,gap:e.space.$4,flexWrap:"wrap",[p.mqu.sm]:{justifyContent:"center"}}),children:[(0,r.tZ)(f,{...C}),(0,r.BX)(d.FormButtonContainer,{sx:e=>({margin:e.space.$none,flexWrap:"wrap",justifyContent:"center"}),children:[(0,r.tZ)(d.Form.SubmitButton,{block:!1,isDisabled:!I,localizationKey:(0,u.u1)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,r.tZ)(d.Form.ResetButton,{localizationKey:a||(0,u.u1)("userProfile.formButtonReset"),block:!1,onClick:i})]})]})]})},f=e=>{let{options:t,isLoading:i}=(0,c.e)(),{t:n}=(0,u.zJ)();return(0,r.tZ)(d.Form.ControlRow,{elementId:e.id,children:(0,r.tZ)(s.Flex,{direction:"col",gap:2,children:(0,r.tZ)(v.DQ,{...e.props,roles:t,isDisabled:i,onChange:t=>e.setValue(t),triggerSx:e=>({minWidth:e.sizes.$40,justifyContent:"space-between",display:"flex"}),optionListSx:e=>({minWidth:e.sizes.$48}),prefixLocalizationKey:"".concat(n((0,u.u1)("formFieldLabel__role")),":")})})})},b=()=>{let{options:e}=(0,c.e)(),{organizationSettings:t}=(0,a.useEnvironment)(),i=t.domains.defaultRole;return i||(null==e?void 0:e.length)!==1||(i=e[0].value),i}},5727:function(e,t,i){i.d(t,{a:()=>h,N:()=>g});var r=i("7126"),n=i("2631"),l=i("3314"),o=i("8969"),a=i("7571"),s=i("3064"),d=i("9885"),c=i("4709"),u=i("8655"),p=i("4676");let m=e=>{let{__unstable_manageBillingUrl:t,__unstable_manageBillingMembersLimit:i}=e,n=(0,p.useRouter)();return(0,r.BX)(s.Flex,{sx:e=>({background:e.colors.$neutralAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,r.tZ)(s.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,r.BX)(s.Text,{children:["This organization is limited to ",(0,l.OR)(i)," members.",(0,r.tZ)("br",{}),(0,r.tZ)(s.Link,{sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>n.navigate((0,l.OR)(t)),children:"Upgrade for unlimited members"})]})]})};var v=i("8493");let g=(0,d.withCardStateProvider)(e=>{let{close:t}=(0,c.XC)(),{onReset:i=t}=e,u=(0,s.localizationKeys)("organizationProfile.invitePage.title"),p=(0,s.localizationKeys)("organizationProfile.invitePage.subtitle"),g=(0,d.useCardState)(),f=(0,o.a2)({onNextStep:()=>g.setError(void 0)}),{organization:b}=(0,n.o8)(),{__unstable_manageBillingUrl:x,__unstable_manageBillingMembersLimit:Z}=(0,a.useOrganizationProfileContext)();if(!b)return null;let _=!!Z&&(0,l.OR)(Z)<=b.pendingInvitationsCount+b.membersCount;return(0,r.BX)(o.en,{...f.props,children:[(0,r.BX)(d.FormContainer,{headerTitle:u,headerSubtitle:p,children:[_&&x&&(0,r.tZ)(m,{__unstable_manageBillingUrl:x,__unstable_manageBillingMembersLimit:Z}),(0,r.tZ)(v.l,{onSuccess:f.nextStep,onReset:i})]}),(0,r.tZ)(d.SuccessPage,{title:u,onFinish:t,contents:(0,r.tZ)(h,{})})]})}),h=()=>(0,r.BX)(s.Flex,{direction:"col",center:!0,gap:4,children:[(0,r.tZ)(d.IconCircle,{boxElementDescriptor:s.descriptors.invitationsSentIconBox,iconElementDescriptor:s.descriptors.invitationsSentIcon,icon:u.GT}),(0,r.tZ)(s.Text,{localizationKey:(0,s.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},408:function(e,t,i){i.d(t,{DQ:function(){return u},RN:function(){return c},wQ:function(){return s}});var r=i(7126),n=i(4194),l=i(3064),o=i(9885),a=i(5872);let s=e=>{let{headers:t,page:i,onPageChange:n,rows:a,isLoading:s,itemCount:c,itemsPerPage:u,pageCount:p,emptyStateLocalizationKey:m}=e,v=c>0?Math.max(0,(i-1)*u)+1:0,g=Math.min(i*u,c);return(0,r.BX)(l.Col,{gap:4,sx:{width:"100%"},children:[(0,r.tZ)(l.Flex,{sx:e=>({overflowX:"auto",padding:e.space.$1}),children:(0,r.BX)(l.Table,{children:[(0,r.tZ)(l.Thead,{children:(0,r.tZ)(l.Tr,{children:t.map((e,t)=>(0,r.tZ)(l.Th,{elementDescriptor:l.descriptors.tableHead,localizationKey:e},t))})}),(0,r.tZ)(l.Tbody,{children:s?(0,r.tZ)(l.Tr,{children:(0,r.tZ)(l.Td,{colSpan:4,children:(0,r.tZ)(l.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:l.descriptors.spinner})})}):a.length?a:(0,r.tZ)(d,{localizationKey:m},"empty")})]})}),p>1&&(0,r.tZ)(o.Pagination,{count:p,page:i,onChange:n,siblingCount:1,rowInfo:{allRowsCount:c,startingRow:v,endingRow:g}})]})},d=e=>(0,r.tZ)(l.Tr,{children:(0,r.tZ)(l.Td,{colSpan:4,children:(0,r.tZ)(l.Text,{localizationKey:e.localizationKey,sx:{margin:"auto",display:"block",width:"fit-content"}})})}),c=e=>(0,r.tZ)(l.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$neutralAlpha50}})}),u=e=>{let{value:t,roles:i,onChange:s,isDisabled:d,triggerSx:c,optionListSx:u,prefixLocalizationKey:m}=e,{localizeCustomRole:v}=(0,a.q)(),g=(0,n.useMemo)(()=>[...i||[]],[i]),h=(0,n.useMemo)(()=>g.find(e=>e.value===t),[g]),{t:f}=(0,l.useLocalizations)(),b=(0,n.useMemo)(()=>g.map(e=>({value:e.value,label:v(e.value)||e.label})),[g,v]);return(0,r.BX)(o.Select,{elementId:"role",options:b,value:t,placeholder:f((0,l.localizationKeys)("organizationProfile.invitePage.selectDropdown__role")),onChange:e=>s(e.value),renderOption:(e,t,i)=>(0,r.tZ)(p,{isSelected:i,option:e,sx:e=>({"&:hover":{backgroundColor:e.colors.$neutralAlpha100},'&[data-focused="true"]':{backgroundColor:e.colors.$neutralAlpha150}})}),children:[(0,r.tZ)("input",{name:"role",type:"hidden",value:t}),(0,r.tZ)(o.SelectButton,{sx:c||(e=>({color:e.colors.$colorText,backgroundColor:"transparent",textWrap:"nowrap"})),isDisabled:d,children:((null==h?void 0:h.label)||(null==h?void 0:h.value))&&(0,r.BX)(l.Flex,{as:"span",gap:1,children:[m&&(0,r.tZ)(l.Text,{as:"span",colorScheme:"secondary",localizationKey:m}),(0,r.tZ)(l.Text,{as:"span",sx:e=>({color:e.colors.$colorText}),children:v(null==h?void 0:h.value)||(null==h?void 0:h.label)})]})}),(0,r.tZ)(o.SelectOptionList,{sx:u})]})},p=(0,n.memo)(e=>{let{option:t,isSelected:i,sx:n,...o}=e;return(0,r.tZ)(l.Flex,{sx:[e=>({width:"100%",padding:"".concat(e.space.$2," ").concat(e.space.$4),borderRadius:e.radii.$md}),n],...o,children:(0,r.tZ)(l.Text,{colorScheme:"secondary",children:null==t?void 0:t.label})})})},8181:function(e,t,i){i.d(t,{D:function(){return a}});var r=i(7126),n=i(3064),l=i(9885),o=i(1085);let a=e=>{let{organization:t,...i}=e;return(0,r.BX)(n.Col,{elementDescriptor:n.descriptors.organizationAvatarUploaderContainer,children:[(0,r.tZ)(n.Text,{variant:"subtitle",sx:e=>({textAlign:"left",marginBottom:e.space.$2}),localizationKey:(0,o.u1)("organizationProfile.start.profileSection.uploadAction__title")}),(0,r.tZ)(l.AvatarUploader,{...i,title:(0,o.u1)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,r.tZ)(l.OrganizationAvatar,{size:e=>e.sizes.$16,...t})})]})}},7484:function(e,t,i){i.d(t,{AO:function(){return r},Sz:function(){return n}});let r={userMemberships:{infinite:!0},userInvitations:{infinite:!0},userSuggestions:{infinite:!0,status:["pending","accepted"]}},n=(e,t,i)=>{var r;if(void 0===t)return[{data:[e],total_count:1}];let n=(null==t?void 0:null===(r=t[t.length-1])||void 0===r?void 0:r.total_count)||1;return t.map(t=>{if(void 0===t)return t;let r=t.data.map(t=>t.id===e.id?{...e}:t);return{...t,data:r,total_count:"negative"===i?n-1:n}})}}}]);